{% extends "base.html" %}

{% block title %}Financial Performance Calculator (Generic){% endblock %}

{% block heading %}Financial Performance Calculator (Generic){% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-8">
    <form id="calculatorForm" class="mb-8 bg-white shadow-md rounded px-8 pt-6 pb-8">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
            <div>
                <label for="projectCost" class="block text-gray-700 text-sm font-bold mb-2">
                    Project Cost:
                    <span class="ml-1 text-gray-500 hover:text-gray-700" title="The total initial investment required for the project">ⓘ</span>
                </label>
                <div class="flex">
                    <input type="number" id="projectCost" name="projectCost" class="shadow appearance-none border rounded-l w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" value="1000000" required>
                    <select id="projectCostScale" name="projectCostScale" class="shadow border rounded-r bg-gray-100 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                        <option value="1">PHP</option>
                        <option value="thousands">Thousand PHP</option>
                        <option value="millions">Million PHP</option>
                    </select>
                </div>
            </div>
            <div>
                <label for="annualSavings" class="block text-gray-700 text-sm font-bold mb-2">
                    Annual Savings/Revenue:
                    <span class="ml-1 text-gray-500 hover:text-gray-700" title="The expected yearly savings or revenue generated by the project">ⓘ</span>
                </label>
                <div class="flex">
                    <input type="number" id="annualSavings" name="annualSavings" class="shadow appearance-none border rounded-l w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" value="100000" required>
                    <select id="annualSavingsScale" name="annualSavingsScale" class="shadow border rounded-r bg-gray-100 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                        <option value="1">PHP</option>
                        <option value="thousands">Thousand PHP</option>
                        <option value="millions">Million PHP</option>
                    </select>
                </div>
            </div>
            <div>
                <label for="projectLife" class="block text-gray-700 text-sm font-bold mb-2">
                    Project Life (years):
                    <span class="ml-1 text-gray-500 hover:text-gray-700" title="The expected duration of the project">ⓘ</span>
                </label>
                <input type="number" id="projectLife" name="projectLife" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" value="10" required>
            </div>
            <div>
                <label for="inflationRate" class="block text-gray-700 text-sm font-bold mb-2">
                    Inflation Rate (%):
                    <span class="ml-1 text-gray-500 hover:text-gray-700" title="The expected annual inflation rate">ⓘ</span>
                </label>
                <input type="number" id="inflationRate" name="inflationRate" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" value="2" step="0.1" required>
            </div>
            <div>
                <label for="discountRate" class="block text-gray-700 text-sm font-bold mb-2">
                    Discount Rate (%):
                    <span class="ml-1 text-gray-500 hover:text-gray-700" title="The rate used to discount future cash flows to present value">ⓘ</span>
                </label>
                <input type="number" id="discountRate" name="discountRate" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" value="5" step="0.1" required>
            </div>
            <div>
                <label for="annualOperatingCost" class="block text-gray-700 text-sm font-bold mb-2">
                    Annual Operating Cost:
                    <span class="ml-1 text-gray-500 hover:text-gray-700" title="The yearly expenses associated with running the project">ⓘ</span>
                </label>
                <div class="flex">
                    <input type="number" id="annualOperatingCost" name="annualOperatingCost" class="shadow appearance-none border rounded-l w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" value="20000" required>
                    <select id="annualOperatingCostScale" name="annualOperatingCostScale" class="shadow border rounded-r bg-gray-100 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                        <option value="1">PHP</option>
                        <option value="thousands">Thousand PHP</option>
                        <option value="millions">Million PHP</option>
                    </select>
                </div>
            </div>
            <div>
                <label for="taxRate" class="block text-gray-700 text-sm font-bold mb-2">
                    Tax Rate (%):
                    <span class="ml-1 text-gray-500 hover:text-gray-700" title="The applicable tax rate on profits">ⓘ</span>
                </label>
                <input type="number" id="taxRate" name="taxRate" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" value="25" step="0.1" required>
            </div>
            <div>
                <label for="salvageValue" class="block text-gray-700 text-sm font-bold mb-2">
                    Salvage Value:
                    <span class="ml-1 text-gray-500 hover:text-gray-700" title="The expected value of the project's assets at the end of its life">ⓘ</span>
                </label>
                <div class="flex">
                    <input type="number" id="salvageValue" name="salvageValue" class="shadow appearance-none border rounded-l w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" value="100000" required>
                    <select id="salvageValueScale" name="salvageValueScale" class="shadow border rounded-r bg-gray-100 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                        <option value="1">PHP</option>
                        <option value="thousands">Thousand PHP</option>
                        <option value="millions">Million PHP</option>
                    </select>
                </div>
            </div>
        </div>
        <div class="flex items-center justify-between">
            <button type="submit" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">
                Calculate Financial Performance
            </button>
        </div>
    </form>

    <div id="results" class="mb-8 hidden">
        <h2 class="text-2xl font-bold mb-4 text-gray-800">Results</h2>
        <div class="bg-white shadow-md rounded p-4">
            <p id="npvResult" class="mb-2"></p>
            <p id="irrResult" class="mb-2"></p>
            <p id="paybackResult" class="mb-2"></p>
            <p id="roiResult" class="mb-2"></p>
        </div>
    </div>

    <div id="sensitivityAnalysis" class="mb-8 hidden">
        <h2 class="text-2xl font-bold mb-4 text-gray-800">Sensitivity Analysis</h2>
        <div class="bg-white shadow-md rounded p-4">
            <canvas id="sensitivityChart"></canvas>
        </div>
    </div>

    <div id="charts" class="mb-8 hidden">
        <h2 class="text-2xl font-bold mb-4 text-gray-800">Cash Flow Chart</h2>
        <div class="bg-white shadow-md rounded p-4">
            <canvas id="cashFlowChart"></canvas>
        </div>
    </div>

    <div class="disclaimer mt-8 p-4 bg-yellow-50 border border-yellow-200 rounded-md">
        <h4 class="font-semibold mb-2 text-yellow-800">Disclaimer:</h4>
        <p class="text-sm text-yellow-700">
            The calculations provided by this tool are based on the inputs provided and use simplified models. 
            Actual financial performance may vary due to numerous factors not accounted for in this basic analysis. 
            This tool is for informational purposes only and should not be considered as financial advice. 
            Please consult with qualified professionals for comprehensive financial analysis and investment decisions.
        </p>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://unpkg.com/@popperjs/core@2"></script>
<script src="https://unpkg.com/tippy.js@6"></script>
<script src="{{ url_for('static', filename='js/generic_financial.js') }}" defer></script>
<noscript>
    <p class="text-red-500 font-bold">This calculator requires JavaScript to function. Please enable JavaScript in your browser.</p>
</noscript>
{% endblock %}